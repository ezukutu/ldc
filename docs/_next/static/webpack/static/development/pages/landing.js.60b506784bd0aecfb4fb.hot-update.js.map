{"version":3,"file":"static/webpack/static/development/pages/landing.js.60b506784bd0aecfb4fb.hot-update.js","sources":["webpack:///./pages-sections/MapSection.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport dynamic from 'next/dynamic';\nimport chroma from \"chroma-js\";\n\nimport classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport SimpleHorizontalBarChart from \"components/SimpleHorizontalBarChart/SimpleHorizontalBarChart.js\";\n\nimport styles from \"assets/jss/common/pages/sections/mapStyle.js\";\nconst useStyles = makeStyles(styles);\n\nconst VectorMap = dynamic(\n  () => import(\"react-jvectormap\").then((m) => m.VectorMap),\n  { ssr: false, }\n);\n\nconst scrollToRef = (ref) => window.scrollTo(0, ref.current.offsetBottom);// ref.current.offsetTop);\n\nconst { getCode, getName, getData } = require(\"country-list\");\n\nexport default function MapSection(props) {\n\tconst classes = useStyles();\n  const [showCountryCard, setShowCountryCard] = useState(false);\n  const [country, setCountry] = useState(\"\");\n  const [countryCode, setCountryCode] = useState(\"\");\n\n  const countryCardRef = useRef(null);\n  const executeScroll = () => scrollToRef(countryCardRef);\n\n  function handleClick(e, code){\n    setTimeout(()=> { Array.from(\n      document.getElementsByClassName(\"jvectormap-tip\"))\n      .forEach((el) => { el.style.display = 'none' }); },100);\n    setShowCountryCard(true);\n    setCountry(getName(code));\n    setCountryCode(code);\n    if (countryCardRef.current !== null)\n        countryCardRef.current.scrollIntoView({ block: 'end', behavior: 'smooth' });\n  }\n\n  const toolTipCountry = (e, el, code) => {\n    if (!(code in props.countrycounts)) {\n      el.html(el.html()).css(\"z-index\",\"-1\");\n    } else {\n      el.css(\"z-index\",\"11\").css(\"fontSize\",\"15px\");\n      el.html('<b>' + el.html() + '</b>' + '</br>' + props.countrycounts[code] + ' responses');\n    }\n  };\n\n  return (\n      <div className={classes.section}>\n        <GridContainer justify=\"center\">\n          <GridItem cs={12} sm={12} md={12}>\n            <h2 className={classes.title}>Countries Surveyed</h2>\n            <h4 className={classes.description}>\n              Highest number of responses from X <br/>\n              X Responses from Africa, etc.\n            </h4>\n              <GridContainer justify=\"center\">\n                <GridItem xs={12} sm={12} md={12}>\n                  <VectorMap\n                    map={\"world_mill\"}\n                    backgroundColor=\"transparent\" //change it to ocean blue: #0077be\n                    zoomOnScroll={false}\n                    containerStyle={{\n                      width: \"100%\",\n                      height: \"700px\"\n                    }}\n                    onRegionClick={handleClick} //gets the country code\n                    containerClassName=\"map\"\n                    focusOn={{\n                      x: 0.6,\n                      y: 0.6,\n                      scale: 2,\n                      animate: true\n                    }}\n                    panOnDrag={true}\n                    showTooltip={true}\n                    regionStyle={{\n                      initial: {\n                        fill: \"#e4e4e4\",\n                        \"fill-opacity\": 0.9,\n                        //stroke: \"none\",\n                        \"stroke-width\": 0,\n                        \"stroke-opacity\": 0\n                      }\n                      // hover: {\n                      //    cursor: \"auto\"\n                      // }\n                      // selected: {\n                      //   fill: \"#2938bc\" //color for the clicked country\n                      // }\n                      // selectedHover: {}\n                    }}\n                    //onRegionTipShow={function(e, el, code){\n                    //  el.html(\"fdsjfds\");\n                    //}}\n                    // regionsSelectable={true}\n                    onRegionTipShow={toolTipCountry}\n                    //onRegionOver={toolTipCountry}\n                    //onLabelShow={toolTipCountry}\n                    series={{\n                      regions: [\n                        {\n                          values: props.countrycounts,\n                          scale: ['#b2ebf2', '#0277bd'],\n                          normalizeFunction: \"polynomial\"\n                        }\n                      ]\n                    }}\n                  />\n                </GridItem>\n                  <div style={{\n                      display: showCountryCard ? \"block\" : \"none\"}}>\n                  <GridItem xs={12} sm={12} md={12}>\n                    <h2 className={classes.title}>{ country }</h2>\n                    <div className={classes.description}>{ props.countrycounts[countryCode] } Responses </div>\n                  </GridItem>\n\n                  <GridItem xs={12} sm={12} md={12}>\n                      <SimpleHorizontalBarChart data={ props.countrychallenges } countrycode={ countryCode }/>\n                  </GridItem>\n                  <GridItem xs={12} sm={12} md={12}>\n                      <SimpleHorizontalBarChart data={ props.countrytimeopen } countrycode={ countryCode }/>\n                  </GridItem>\n                    <div ref={countryCardRef}>\n                    </div>\n                  </div>\n              </GridContainer>\n          </GridItem>\n        </GridContainer>\n      </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AARA;AASA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AACA;AACA;AArCA;AAsCA;AAEA;AAxCA;AAyCA;AACA;AAEA;AACA;AACA;AAHA;AAFA;AAzCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoDA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;;;;A","sourceRoot":""}